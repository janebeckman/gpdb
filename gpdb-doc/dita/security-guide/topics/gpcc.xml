<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_zyt_rxp_f5">
  <title>Greenplum Command Center Security</title>
  <body>
    <p>Greenplum Command Center (GPCC) is a web-based application for monitoring and managing
      Greenplum clusters. GPCC works with data collected by agents running on the segment hosts
      and saved to the gpperfmon database. The gpperfmon database is created by running the
      <codeph>gpperfmon_install</codeph> utility, which also creates the <codeph>gpmon</codeph>
      database role that GPCC uses to access the gpperfmon database. </p>
    <section>
      <title>The gpmon User</title>
      <p>The <codeph>gpperfmon_install</codeph> utility creates the <codeph>gpmon</codeph>
        database role and adds the role to the <codeph>pg_hba.conf</codeph> file with the
        following
        entries:<codeblock>local    gpperfmon   gpmon                         md5
host     all         gpmon         127.0.0.1/28    md5</codeblock>These
        entries allow <codeph>gpmon</codeph> to establish a local socket connection to the
        gpperfmon database and a TCP/IP connection to any database. </p>
      <p>The <codeph>gpmon</codeph> database role is a superuser. In a secure or production
        environment, it may be desirable to restrict the <codeph>gpmon</codeph> user to just the
        gpperfmon database. Do this by editing the <codeph>gpmon</codeph> host entry in the
        <codeph>pg_hba.conf</codeph> file and changing <codeph>all</codeph> in the database
        field to
        <codeph>gpperfmon</codeph>:<codeblock>local   gpperfmon   gpmon                        md5
host    gpperfmon   gpmon    127.0.0.1/28        md5</codeblock></p>
      <p>The password used to authenticate the <codeph>gpmon</codeph> user is set by the
        <codeph>gpperfmon_install</codeph> utility and is stored in the <codeph>gpadmin</codeph>
        home directory in the <codeph>~/.pgpass</codeph> file. The <codeph>~/.pgpass</codeph> file
        must be owned by the <codeph>gpadmin</codeph> user and RW-accessible only by the
        <codeph>gpadmin</codeph> user. To change the <codeph>gpmon</codeph> password, use the
        <codeph>ALTER ROLE</codeph> command to change the password in the database, change the
        password in the <codeph>~/.pgpass</codeph> file, and then restart GPCC with the
        <codeph>gpcmdr --restart <varname>instance_name</varname></codeph> command. </p>
      <note>The GPCC web server can be configured to encrypt connections with SSL. Two-way
        authentication with public keys can also be enabled for GPCC users. However, the
        <codeph>gpmon</codeph> user always uses md5 authentication with the password saved in
        the <codeph>~/.pgpass</codeph> file. </note>
      <p>GPCC does not allow logins from any role configured with trust authentication, including
        the <codeph>gpadmin</codeph> user. </p>
      <p>The <codeph>gpmon</codeph> user can log in to the Command Center Console and has access
        to all of the application's features. You can allow other database roles access to GPCC so
        that you can secure the <codeph>gpmon</codeph> user and restrict other users' access to
        GPCC features. Setting up other GPCC users is described in the next section. </p>
    </section>
    <section>
      <title>Greenplum Command Center Users</title>
      <p>GPCC has three types of users:<ul id="ul_tdv_qnt_g5">
        <li><i>Regular</i> users can view their own queries in GPCC, but do not have access to
          administrative tasks in GPCC. </li>
        <li><i>Operators</i> have access to more functionality in the Command Center Console
          than regular users. They can view and cancel all queries and they have limited access
          to administrative tasks. </li>
        <li><i>Superusers</i> are Greenplum Database superusers. They can use all GPCC features,
          including viewing information for all database queries, system metrics, and performing
          potentially disruptive administrative tasks, such as stopping or restarting the
          database system.</li>
      </ul></p>
      <p>To log in to the GPCC web application, a user must be allowed access to the gpperfmon
        database in <codeph>pg_hba.conf</codeph>. For example, to make <codeph>user1</codeph> a
        regular GPCC user, edit the <codeph>pg_hba.conf</codeph> file and either add or edit a
        line for the user so that the gpperfmon database is included in the database field. For
        example:</p>
      <codeblock>host     gpperfmon,accounts   user1     127.0.0.1/28    md5</codeblock>
      <p>To designate a user as an operator, create the <codeph>gpcc_operator</codeph> role, if it
        does not already exist:<codeblock>=# CREATE ROLE gpcc_operator;</codeblock></p>
      <p>Then grant the <codeph>gpcc_operator</codeph> role to the
        user:<codeblock>=# GRANT gpcc_operator TO <varname>user</varname>;</codeblock></p>
      <p>You can also grant <codeph>gpcc_operator</codeph> to a group role to make all members of
        the group GPCC operators.</p>
      <p>See the <codeph>gpperfmon_install</codeph> reference in <cite>Greenplum Database Utility
        Guide</cite> and the <cite>Greenplum Command Center Administrator Guide</cite> for more
        information about managing the <codeph>gpperfmon</codeph> database and GPCC security.</p>
    </section>
    <section>
      <title>Enabling SSL for Greenplum Command Center</title>
      <p>The GPCC web server can be configured to support SSL so that client connections are
        encrypted. A server certificate can be generated when the Command Center instance is
        created or you can supply an existing certificate. </p>
      <p>Two-way authentication with public key encryption can also be enabled for GPCC. See the
        <cite>Greenplum Command Center Administration Guide</cite> for instructions. </p>
    </section>
  </body>
</topic>